(window["wpshopify"] = window["wpshopify"] || []).push([[5],{

/***/ "./common/pricing/formatting.js":
/*!**************************************************!*\
  !*** ./common/pricing/formatting.js + 1 modules ***!
  \**************************************************/
/*! exports provided: formatPrice, formatPriceToCurrency */
/*! ModuleConcatenation bailout: Cannot concat with ./common/globals/index.js */
/*! ModuleConcatenation bailout: Cannot concat with ./common/pricing/currency.js */
/*! ModuleConcatenation bailout: Cannot concat with ./common/settings/index.js */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/lodash/has.js (<- Module is not an ECMAScript module) */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("\n// EXTERNAL MODULE: ./node_modules/lodash/has.js\nvar has = __webpack_require__(\"./node_modules/lodash/has.js\");\nvar has_default = /*#__PURE__*/__webpack_require__.n(has);\n\n// EXTERNAL MODULE: ./common/settings/index.js\nvar settings = __webpack_require__(\"./common/settings/index.js\");\n\n// CONCATENATED MODULE: ./common/shop/index.js\nfunction shopActive() {\n  if (!WP_Shopify.shop) {\n    return false;\n  } else {\n    return true;\n  }\n}\n\nfunction getShop() {\n  return WP_Shopify.shop;\n}\n\nfunction setShop(shop) {\n  if (!shopActive()) {\n    WP_Shopify.shop = shop;\n  }\n}\n/*\n\nGets the Shop info\n\nclient: The Shopify instance\n\nReturns an immediately resolved promise if shop exists\n\n*/\n\n\nfunction getShopInfo(client) {\n  if (shopActive()) {\n    return new Promise(function (resolve, reject) {\n      return resolve(getShop());\n    });\n  }\n\n  return client.shop.fetchInfo();\n}\n\nfunction getMoneyFormat(shop) {\n  return shop.moneyFormat;\n}\n\n\n// EXTERNAL MODULE: ./common/pricing/currency.js + 2 modules\nvar currency = __webpack_require__(\"./common/pricing/currency.js\");\n\n// EXTERNAL MODULE: ./common/globals/index.js\nvar globals = __webpack_require__(\"./common/globals/index.js\");\n\n// CONCATENATED MODULE: ./common/pricing/formatting.js\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"formatPrice\", function() { return formatPrice; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"formatPriceToCurrency\", function() { return formatPriceToCurrency; });\n\n\n\n\n\n\nfunction formatNumber(config) {\n  return new Intl.NumberFormat(config.locale, {\n    style: 'currency',\n    currency: config.countryCode,\n    currencyDisplay: config.currencyDisplay\n  }).format(config.amount);\n}\n/*\n\nlocale currently not used\n\nConfig: {\n  locale: 'en-US',\n  countryCode: 'US',\n  amount: 123,\n}\n\n*/\n\n\nfunction formatPrice(config) {\n  // Uses the browser locale by default\n  if (!has_default()(config, 'locale')) {\n    config.locale = false;\n  }\n\n  return formatNumber(config);\n}\n/*\n\n\"price\" should always be preformatted\n\n*/\n\n\nfunction formatPriceToCurrency(price, currencyCode) {\n  return formatPrice({\n    countryCode: currencyCode,\n    // getLocalCurrencyCodeCache()\n    amount: price,\n    currencyDisplay: Object(globals[\"currencyDisplayStyle\"])()\n  });\n}\n\n\n\n//# sourceURL=webpack://wpshopify/./common/pricing/formatting.js_+_1_modules?");

/***/ }),

/***/ "./components/cart/footer/index.jsx":
/*!******************************************************!*\
  !*** ./components/cart/footer/index.jsx + 4 modules ***!
  \******************************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/helpers/asyncToGenerator.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/helpers/slicedToArray.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/regenerator/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/await-to-js/dist/await-to-js.es5.js */
/*! ModuleConcatenation bailout: Cannot concat with ../wpshopify-api/index.js */
/*! ModuleConcatenation bailout: Cannot concat with ./common/animations/index.js */
/*! ModuleConcatenation bailout: Cannot concat with ./common/pricing/formatting.js */
/*! ModuleConcatenation bailout: Cannot concat with ./components/cart/_state/context.js */
/*! ModuleConcatenation bailout: Cannot concat with ./components/loader/index.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/notices/index.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/shop/_state/context.js */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/lodash/isEmpty.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/use-debounce/lib/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with external "react" (<- Module is not an ECMAScript module) */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/slicedToArray.js\nvar slicedToArray = __webpack_require__(\"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\nvar slicedToArray_default = /*#__PURE__*/__webpack_require__.n(slicedToArray);\n\n// EXTERNAL MODULE: external \"react\"\nvar external_react_ = __webpack_require__(\"react\");\nvar external_react_default = /*#__PURE__*/__webpack_require__.n(external_react_);\n\n// EXTERNAL MODULE: ./components/shop/_state/context.js\nvar context = __webpack_require__(\"./components/shop/_state/context.js\");\n\n// EXTERNAL MODULE: ./components/cart/_state/context.js\nvar _state_context = __webpack_require__(\"./components/cart/_state/context.js\");\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(\"./node_modules/@babel/runtime/regenerator/index.js\");\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(\"./node_modules/@babel/runtime/helpers/asyncToGenerator.js\");\nvar asyncToGenerator_default = /*#__PURE__*/__webpack_require__.n(asyncToGenerator);\n\n// EXTERNAL MODULE: ./components/loader/index.jsx\nvar loader = __webpack_require__(\"./components/loader/index.jsx\");\n\n// EXTERNAL MODULE: ../wpshopify-api/index.js + 17 modules\nvar wpshopify_api = __webpack_require__(\"../wpshopify-api/index.js\");\n\n// EXTERNAL MODULE: ./node_modules/lodash/isEmpty.js\nvar isEmpty = __webpack_require__(\"./node_modules/lodash/isEmpty.js\");\nvar isEmpty_default = /*#__PURE__*/__webpack_require__.n(isEmpty);\n\n// EXTERNAL MODULE: ./node_modules/await-to-js/dist/await-to-js.es5.js\nvar await_to_js_es5 = __webpack_require__(\"./node_modules/await-to-js/dist/await-to-js.es5.js\");\n\n// CONCATENATED MODULE: ./components/cart/checkout/index.jsx\n\n\n\n\n\n\n\n\n\n\n\nfunction CartCheckout() {\n  var _useContext = Object(external_react_[\"useContext\"])(context[\"ShopContext\"]),\n      _useContext2 = slicedToArray_default()(_useContext, 1),\n      shopState = _useContext2[0];\n\n  var _useContext3 = Object(external_react_[\"useContext\"])(_state_context[\"CartContext\"]),\n      _useContext4 = slicedToArray_default()(_useContext3, 2),\n      cartState = _useContext4[0],\n      cartDispatch = _useContext4[1];\n\n  function hasManagedDomain(url) {\n    return url.includes('myshopify.com');\n  }\n\n  function extractCheckoutURL(webUrl) {\n    return webUrl.split('myshopify.com')[1];\n  }\n\n  function checkoutUrlWithCustomDomain(webUrl) {\n    return shopState.info.primaryDomain.url + extractCheckoutURL(webUrl);\n  }\n\n  function checkoutWindowTarget() {\n    if (shopState.isMobile) {\n      cartDispatch({\n        type: 'SET_IS_CHECKING_OUT',\n        payload: false\n      });\n      return '_self';\n    }\n\n    if (WP_Shopify.settings.checkoutButtonTarget === '_blank') {\n      cartDispatch({\n        type: 'SET_IS_CHECKING_OUT',\n        payload: false\n      });\n    }\n\n    return WP_Shopify.settings.checkoutButtonTarget;\n  }\n\n  function managedDomainRedirect(checkout) {\n    window.open(checkout.webUrl, checkoutWindowTarget());\n  }\n\n  function customDomainRedirect(checkout) {\n    window.open(checkoutUrlWithCustomDomain(checkout.webUrl), checkoutWindowTarget());\n  }\n\n  function checkoutRedirect(checkout) {\n    if (!WP_Shopify.settings.enableCustomCheckoutDomain || !hasManagedDomain(checkout.webUrl)) {\n      return managedDomainRedirect(checkout);\n    }\n\n    customDomainRedirect(checkout);\n  }\n\n  function onCheckout() {\n    return _onCheckout.apply(this, arguments);\n  }\n\n  function _onCheckout() {\n    _onCheckout = asyncToGenerator_default()(\n    /*#__PURE__*/\n    regenerator_default.a.mark(function _callee() {\n      var _ref, _ref2, err, success, _ref3, _ref4, errAttr, resp;\n\n      return regenerator_default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              cartDispatch({\n                type: 'UPDATE_NOTICES',\n                payload: []\n              });\n              cartDispatch({\n                type: 'SET_IS_CHECKING_OUT',\n                payload: true\n              });\n\n              if (wp.hooks) {\n                wp.hooks.doAction('on.checkout', cartState.checkoutCache);\n              }\n\n              _context.next = 5;\n              return Object(await_to_js_es5[\"default\"])(Object(wpshopify_api[\"replaceLineItems\"])(cartState.checkoutCache.lineItems));\n\n            case 5:\n              _ref = _context.sent;\n              _ref2 = slicedToArray_default()(_ref, 2);\n              err = _ref2[0];\n              success = _ref2[1];\n\n              if (!err) {\n                _context.next = 12;\n                break;\n              }\n\n              cartDispatch({\n                type: 'SET_IS_CHECKING_OUT',\n                payload: false\n              });\n              return _context.abrupt(\"return\", cartDispatch({\n                type: 'UPDATE_NOTICES',\n                payload: {\n                  type: 'error',\n                  message: err\n                }\n              }));\n\n            case 12:\n              if (!isEmpty_default()(success.lineItems)) {\n                _context.next = 15;\n                break;\n              }\n\n              cartDispatch({\n                type: 'SET_IS_CHECKING_OUT',\n                payload: false\n              });\n              return _context.abrupt(\"return\", cartDispatch({\n                type: 'UPDATE_NOTICES',\n                payload: {\n                  type: 'error',\n                  message: 'No line items exist '\n                }\n              }));\n\n            case 15:\n              if (!(!isEmpty_default()(cartState.customAttributes) || !isEmpty_default()(cartState.note))) {\n                _context.next = 26;\n                break;\n              }\n\n              _context.next = 18;\n              return Object(await_to_js_es5[\"default\"])(Object(wpshopify_api[\"updateCheckoutAttributes\"])({\n                customAttributes: cartState.customAttributes,\n                note: cartState.note\n              }));\n\n            case 18:\n              _ref3 = _context.sent;\n              _ref4 = slicedToArray_default()(_ref3, 2);\n              errAttr = _ref4[0];\n              resp = _ref4[1];\n\n              if (!errAttr) {\n                _context.next = 25;\n                break;\n              }\n\n              cartDispatch({\n                type: 'SET_IS_CHECKING_OUT',\n                payload: false\n              });\n              return _context.abrupt(\"return\", cartDispatch({\n                type: 'UPDATE_NOTICES',\n                payload: {\n                  type: 'error',\n                  message: errAttr\n                }\n              }));\n\n            case 25:\n              return _context.abrupt(\"return\", checkoutRedirect(resp));\n\n            case 26:\n              checkoutRedirect(success);\n\n            case 27:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _onCheckout.apply(this, arguments);\n  }\n\n  function buttonStyle() {\n    return {\n      backgroundColor: shopState.settings.cart.checkoutButtonColor\n    };\n  }\n\n  return external_react_default.a.createElement(external_react_default.a.Fragment, null, external_react_default.a.createElement(\"button\", {\n    className: \"wps-btn wps-btn-checkout\",\n    onClick: onCheckout,\n    \"data-wps-is-ready\": cartState.isReady,\n    disabled: cartState.isCheckingOut || !cartState.termsAccepted || cartState.isCartEmpty,\n    style: buttonStyle()\n  }, cartState.isCheckingOut ? external_react_default.a.createElement(loader[\"Loader\"], {\n    isLoading: cartState.isCheckingOut\n  }) : cartState.checkoutText));\n}\n\n\n// EXTERNAL MODULE: ./node_modules/use-debounce/lib/index.js\nvar lib = __webpack_require__(\"./node_modules/use-debounce/lib/index.js\");\n\n// CONCATENATED MODULE: ./components/cart/note/index.jsx\n\n\n\n\n\nfunction CartNote() {\n  var _useContext = Object(external_react_[\"useContext\"])(context[\"ShopContext\"]),\n      _useContext2 = slicedToArray_default()(_useContext, 2),\n      shopState = _useContext2[0],\n      shopDispatch = _useContext2[1];\n\n  var _useState = Object(external_react_[\"useState\"])(''),\n      _useState2 = slicedToArray_default()(_useState, 2),\n      noteValue = _useState2[0],\n      setNoteValue = _useState2[1];\n\n  var _useDebounce = Object(lib[\"useDebounce\"])(noteValue, 250),\n      _useDebounce2 = slicedToArray_default()(_useDebounce, 1),\n      debouncedValue = _useDebounce2[0];\n\n  var isFirstRender = Object(external_react_[\"useRef\"])(true);\n\n  function onChange(e) {\n    setNoteValue(e.target.value);\n  }\n\n  Object(external_react_[\"useEffect\"])(function () {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n\n    if (wp.hooks) {\n      wp.hooks.doAction('on.checkout.note', debouncedValue);\n    }\n\n    shopDispatch({\n      type: 'SET_CHECKOUT_NOTE',\n      payload: debouncedValue\n    });\n  }, [debouncedValue]);\n  return external_react_default.a.createElement(\"section\", {\n    className: \"wps-cart-notes\"\n  }, external_react_default.a.createElement(\"label\", {\n    value: \"Checkout notes\",\n    htmlFor: \"wps-input-notes\"\n  }, \"Notes:\"), external_react_default.a.createElement(\"textarea\", {\n    placeholder: shopState.settings.cart.cartNotesPlaceholder,\n    id: \"wps-input-notes\",\n    className: \"wps-input wps-input-textarea\",\n    onChange: onChange\n  }));\n}\n\n\n// CONCATENATED MODULE: ./components/cart/terms/index.jsx\n\n\n\n\n\nfunction CartTerms() {\n  var _useContext = Object(external_react_[\"useContext\"])(context[\"ShopContext\"]),\n      _useContext2 = slicedToArray_default()(_useContext, 1),\n      shopState = _useContext2[0];\n\n  var _useContext3 = Object(external_react_[\"useContext\"])(_state_context[\"CartContext\"]),\n      _useContext4 = slicedToArray_default()(_useContext3, 2),\n      cartState = _useContext4[0],\n      cartDispatch = _useContext4[1];\n\n  var _useState = Object(external_react_[\"useState\"])(false),\n      _useState2 = slicedToArray_default()(_useState, 2),\n      isChecked = _useState2[0],\n      setIsChecked = _useState2[1];\n\n  Object(external_react_[\"useEffect\"])(function () {\n    cartDispatch({\n      type: 'SET_TERMS_ACCEPTED',\n      payload: false\n    });\n  }, []);\n\n  function termsLabel() {\n    return {\n      __html: shopState.settings.cart.cartTermsContent\n    };\n  }\n\n  function onChange(e) {\n    setIsChecked(!isChecked);\n    cartDispatch({\n      type: 'SET_TERMS_ACCEPTED',\n      payload: !isChecked\n    });\n  }\n\n  return external_react_default.a.createElement(\"section\", {\n    className: \"wps-cart-terms container\"\n  }, external_react_default.a.createElement(\"div\", {\n    className: \"wps-input-row row\"\n  }, external_react_default.a.createElement(\"input\", {\n    onChange: onChange,\n    id: \"wps-input-terms\",\n    defaultChecked: isChecked,\n    type: \"checkbox\",\n    className: \"wps-input wps-input-checkbox\"\n  }), external_react_default.a.createElement(\"label\", {\n    dangerouslySetInnerHTML: termsLabel(),\n    htmlFor: \"wps-input-terms\",\n    className: \"col-11 wps-input-label wps-input-terms\"\n  })));\n}\n\n\n// EXTERNAL MODULE: ./components/notices/index.jsx\nvar notices = __webpack_require__(\"./components/notices/index.jsx\");\n\n// EXTERNAL MODULE: ./common/pricing/formatting.js + 1 modules\nvar formatting = __webpack_require__(\"./common/pricing/formatting.js\");\n\n// EXTERNAL MODULE: ./common/animations/index.js + 1 modules\nvar animations = __webpack_require__(\"./common/animations/index.js\");\n\n// CONCATENATED MODULE: ./components/cart/footer/total/index.jsx\n\n\n\n\n\n\nfunction CartFooterTotal(_ref) {\n  var isReady = _ref.isReady,\n      totalElement = _ref.totalElement,\n      currencyCode = _ref.currencyCode;\n  var animate = Object(animations[\"useAnime\"])(animations[\"pulse\"]);\n\n  var _useContext = Object(external_react_[\"useContext\"])(_state_context[\"CartContext\"]),\n      _useContext2 = slicedToArray_default()(_useContext, 1),\n      cartState = _useContext2[0];\n\n  Object(external_react_[\"useEffect\"])(function () {\n    if (!isReady) {\n      return;\n    }\n\n    animate(totalElement.current);\n  }, [cartState.total]);\n  return external_react_default.a.createElement(\"div\", {\n    className: \"baseline row align-items-end justify-content-between m-0\"\n  }, external_react_default.a.createElement(\"p\", {\n    className: \"wps-total-prefix p-0\"\n  }, \"Subtotal:\"), external_react_default.a.createElement(\"p\", {\n    className: \"wps-total-amount col p-0\",\n    ref: totalElement,\n    \"data-wps-is-ready\": isReady\n  }, isReady && Object(formatting[\"formatPriceToCurrency\"])(cartState.total, currencyCode)));\n}\n\n\n// CONCATENATED MODULE: ./components/cart/footer/index.jsx\n\n\n\n\n\n\n\n\n\n\n\nfunction CartFooter() {\n  var _useContext = Object(external_react_[\"useContext\"])(context[\"ShopContext\"]),\n      _useContext2 = slicedToArray_default()(_useContext, 1),\n      shopState = _useContext2[0];\n\n  var _useContext3 = Object(external_react_[\"useContext\"])(_state_context[\"CartContext\"]),\n      _useContext4 = slicedToArray_default()(_useContext3, 1),\n      cartState = _useContext4[0];\n\n  var totalElement = Object(external_react_[\"useRef\"])();\n  return external_react_default.a.createElement(\"section\", {\n    className: \"wps-cart-footer\"\n  }, shopState.settings.cart.enableCartNotes && external_react_default.a.createElement(CartNote, null), shopState.settings.cart.enableCartTerms && external_react_default.a.createElement(CartTerms, null), !isEmpty_default()(cartState.notices) && external_react_default.a.createElement(notices[\"Notices\"], {\n    notices: cartState.notices,\n    noticeGroup: \"cart\"\n  }), external_react_default.a.createElement(CartFooterTotal, {\n    isReady: cartState.isReady,\n    currencyCode: shopState.info.currencyCode,\n    totalElement: totalElement\n  }), external_react_default.a.createElement(CartCheckout, null));\n}\n\n/* harmony default export */ var footer = __webpack_exports__[\"default\"] = (CartFooter);\n\n//# sourceURL=webpack://wpshopify/./components/cart/footer/index.jsx_+_4_modules?");

/***/ })

}]);