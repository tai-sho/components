(window["wpshopify"] = window["wpshopify"] || []).push([[10],{

/***/ "./components/products/product/buy-button/option/dropdown/index.jsx":
/*!**************************************************************************************!*\
  !*** ./components/products/product/buy-button/option/dropdown/index.jsx + 2 modules ***!
  \**************************************************************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/helpers/slicedToArray.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@tippy.js/react/esm/index.js */
/*! ModuleConcatenation bailout: Cannot concat with ./common/hooks/index.js */
/*! ModuleConcatenation bailout: Cannot concat with ./common/utils/index.js */
/*! ModuleConcatenation bailout: Cannot concat with ./components/products/product/buy-button/_state/context.js */
/*! ModuleConcatenation bailout: Cannot concat with ./components/products/product/buy-button/option/_state/context.js */
/*! ModuleConcatenation bailout: Cannot concat with ./components/shop/_state/context.js */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/lodash/find.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/lodash/isEmpty.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with external "react" (<- Module is not an ECMAScript module) */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/slicedToArray.js\nvar slicedToArray = __webpack_require__(\"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\nvar slicedToArray_default = /*#__PURE__*/__webpack_require__.n(slicedToArray);\n\n// EXTERNAL MODULE: external \"react\"\nvar external_react_ = __webpack_require__(\"react\");\nvar external_react_default = /*#__PURE__*/__webpack_require__.n(external_react_);\n\n// EXTERNAL MODULE: ./components/products/product/buy-button/option/_state/context.js\nvar context = __webpack_require__(\"./components/products/product/buy-button/option/_state/context.js\");\n\n// EXTERNAL MODULE: ./components/shop/_state/context.js\nvar _state_context = __webpack_require__(\"./components/shop/_state/context.js\");\n\n// EXTERNAL MODULE: ./components/products/product/buy-button/_state/context.js\nvar buy_button_state_context = __webpack_require__(\"./components/products/product/buy-button/_state/context.js\");\n\n// EXTERNAL MODULE: ./node_modules/lodash/find.js\nvar find = __webpack_require__(\"./node_modules/lodash/find.js\");\nvar find_default = /*#__PURE__*/__webpack_require__.n(find);\n\n// EXTERNAL MODULE: ./node_modules/lodash/isEmpty.js\nvar isEmpty = __webpack_require__(\"./node_modules/lodash/isEmpty.js\");\nvar isEmpty_default = /*#__PURE__*/__webpack_require__.n(isEmpty);\n\n// EXTERNAL MODULE: ./common/utils/index.js\nvar utils = __webpack_require__(\"./common/utils/index.js\");\n\n// CONCATENATED MODULE: ./components/products/product/buy-button/option/variants/variant/index.jsx\n\n\n\n\n\n\n\n\n\nfunction ProductVariant(_ref) {\n  var variant = _ref.variant;\n\n  var _useState = Object(external_react_[\"useState\"])(true),\n      _useState2 = slicedToArray_default()(_useState, 2),\n      isSelectable = _useState2[0],\n      setIsSelectable = _useState2[1];\n\n  var isFirstRender = Object(external_react_[\"useRef\"])(true);\n\n  var _useContext = Object(external_react_[\"useContext\"])(_state_context[\"ShopContext\"]),\n      _useContext2 = slicedToArray_default()(_useContext, 2),\n      shopState = _useContext2[0],\n      shopDispatch = _useContext2[1];\n\n  var _useContext3 = Object(external_react_[\"useContext\"])(context[\"ProductOptionContext\"]),\n      _useContext4 = slicedToArray_default()(_useContext3, 2),\n      productOptionState = _useContext4[0],\n      productOptionDispatch = _useContext4[1];\n\n  var _useContext5 = Object(external_react_[\"useContext\"])(buy_button_state_context[\"ProductBuyButtonContext\"]),\n      _useContext6 = slicedToArray_default()(_useContext5, 2),\n      buyButtonState = _useContext6[0],\n      buyButtonDispatch = _useContext6[1];\n\n  function onVariantSelection() {\n    var selectedVariant = Object(utils[\"createObj\"])(productOptionState.option.name, variant.value); // setSelectedOptions(optionsUpdated);\n\n    buyButtonDispatch({\n      type: 'UPDATE_SELECTED_OPTIONS',\n      payload: selectedVariant\n    });\n    productOptionDispatch({\n      type: 'TOGGLE_DROPDOWN',\n      payload: false\n    });\n    productOptionDispatch({\n      type: 'SET_IS_OPTION_SELECTED',\n      payload: true\n    });\n    productOptionDispatch({\n      type: 'SET_SELECTED_OPTION',\n      payload: selectedVariant\n    });\n\n    if (wp.hooks) {\n      wp.hooks.doAction('on.product.variant.selection', selectedVariant, productOptionState);\n    }\n  }\n\n  Object(external_react_[\"useEffect\"])(function () {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n\n    var variantToCheck = Object(utils[\"createObj\"])(productOptionState.option.name, variant.value);\n    var variantIsSelected = find_default()(buyButtonState.availableVariants, variantToCheck);\n\n    if (variantIsSelected === undefined) {\n      setIsSelectable(false);\n    } else {\n      setIsSelectable(true);\n    }\n  }, [buyButtonState.availableVariants]);\n  Object(external_react_[\"useEffect\"])(function () {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n\n    if (isEmpty_default()(buyButtonState.selectedOptions)) {\n      setIsSelectable(true);\n    }\n  }, [buyButtonState.selectedOptions]);\n  return external_react_default.a.createElement(\"li\", {\n    itemProp: \"category\",\n    className: \"wps-product-variant wps-product-style wps-modal-close-trigger\",\n    onClick: onVariantSelection,\n    \"data-wps-is-selectable\": isSelectable\n  }, variant.value);\n}\n\n\n// EXTERNAL MODULE: ./common/hooks/index.js\nvar hooks = __webpack_require__(\"./common/hooks/index.js\");\n\n// CONCATENATED MODULE: ./components/products/product/buy-button/option/variants/index.jsx\n\n\n\n\n\n\n\nfunction ProductVariants() {\n  var isFirstRender = Object(external_react_[\"useRef\"])(true);\n\n  var _useContext = Object(external_react_[\"useContext\"])(buy_button_state_context[\"ProductBuyButtonContext\"]),\n      _useContext2 = slicedToArray_default()(_useContext, 2),\n      buyButtonState = _useContext2[0],\n      buyButtonDispatch = _useContext2[1];\n\n  var _useContext3 = Object(external_react_[\"useContext\"])(context[\"ProductOptionContext\"]),\n      _useContext4 = slicedToArray_default()(_useContext3, 2),\n      productOptionState = _useContext4[0],\n      productOptionDispatch = _useContext4[1];\n\n  function isDropdownOpen() {\n    return productOptionState.isDropdownOpen;\n  }\n\n  Object(hooks[\"useOnClickOutside\"])(productOptionState.dropdownElement, function () {\n    productOptionDispatch({\n      type: 'TOGGLE_DROPDOWN',\n      payload: false\n    });\n  }, isDropdownOpen);\n  Object(external_react_[\"useEffect\"])(function () {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n\n    buyButtonDispatch({\n      type: 'SET_AVAILABLE_VARIANTS',\n      payload: productOptionState.selectedOption\n    });\n  }, [productOptionState.selectedOption]);\n  return external_react_default.a.createElement(\"ul\", {\n    className: \"wps-modal wps-variants\",\n    \"data-wps-modal-is-open\": productOptionState.isDropdownOpen\n  }, productOptionState.option.values.map(function (optionValue) {\n    return external_react_default.a.createElement(ProductVariant, {\n      key: optionValue.value,\n      variant: optionValue\n    });\n  }));\n}\n\n\n// EXTERNAL MODULE: ./node_modules/@tippy.js/react/esm/index.js + 1 modules\nvar esm = __webpack_require__(\"./node_modules/@tippy.js/react/esm/index.js\");\n\n// CONCATENATED MODULE: ./components/products/product/buy-button/option/dropdown/index.jsx\n\n\n\n\n // import { ProductOptionTrigger } from '../trigger'\n\n\n\n\nvar ProductOptionTrigger = external_react_default.a.lazy(function () {\n  return __webpack_require__.e(/*! import() */ 11).then(__webpack_require__.bind(null, /*! ../trigger */ \"./components/products/product/buy-button/option/trigger/index.jsx\"));\n});\n\nfunction ProductOptionDropdown() {\n  var _useContext = Object(external_react_[\"useContext\"])(buy_button_state_context[\"ProductBuyButtonContext\"]),\n      _useContext2 = slicedToArray_default()(_useContext, 2),\n      buyButtonState = _useContext2[0],\n      buyButtonDispatch = _useContext2[1];\n\n  var _useContext3 = Object(external_react_[\"useContext\"])(context[\"ProductOptionContext\"]),\n      _useContext4 = slicedToArray_default()(_useContext3, 2),\n      productOptionState = _useContext4[0],\n      productOptionDispatch = _useContext4[1];\n\n  var isFirstRender = Object(external_react_[\"useRef\"])(true); // When buyButtonState.availableVariants changes ...\n\n  Object(external_react_[\"useEffect\"])(function () {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n\n    var optionIsAvailable = find_default()(buyButtonState.availableVariants, productOptionState.selectedOption);\n\n    if (optionIsAvailable === undefined) {\n      productOptionDispatch({\n        type: 'SET_IS_OPTION_SELECTED',\n        payload: false\n      });\n      buyButtonDispatch({\n        type: 'UNSET_SELECTED_OPTIONS',\n        payload: productOptionState.option.name\n      });\n    }\n  }, [buyButtonState.availableVariants]);\n  Object(external_react_[\"useEffect\"])(function () {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n\n    if (isEmpty_default()(buyButtonState.selectedOptions)) {\n      productOptionDispatch({\n        type: 'SET_IS_OPTION_SELECTED',\n        payload: false\n      });\n    }\n  }, [buyButtonState.selectedOptions]);\n  return external_react_default.a.createElement(\"div\", {\n    className: \"row\"\n  }, external_react_default.a.createElement(\"div\", {\n    className: \"wps-btn-dropdown\",\n    \"data-wps-is-selected\": productOptionState.isOptionSelected,\n    ref: productOptionState.dropdownElement\n  }, external_react_default.a.createElement(esm[\"default\"], {\n    visible: productOptionState.isDropdownOpen,\n    animateFill: false,\n    placement: \"bottom\",\n    allowHTML: true,\n    appendTo: \"parent\",\n    animation: \"shift-away\",\n    flip: false,\n    theme: \"light\",\n    interactive: true,\n    inertia: true,\n    delay: [0, 0],\n    content: external_react_default.a.createElement(ProductVariants, null)\n  }, external_react_default.a.createElement(\"span\", null, external_react_default.a.createElement(ProductOptionTrigger, null)))));\n}\n\n/* harmony default export */ var dropdown = __webpack_exports__[\"default\"] = (ProductOptionDropdown);\n\n//# sourceURL=webpack://wpshopify/./components/products/product/buy-button/option/dropdown/index.jsx_+_2_modules?");

/***/ })

}]);