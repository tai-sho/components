(window["wpshopify"] = window["wpshopify"] || []).push([[13],{

/***/ "./components/products/product/images/index.jsx":
/*!******************************************************************!*\
  !*** ./components/products/product/images/index.jsx + 9 modules ***!
  \******************************************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/helpers/extends.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/helpers/objectSpread.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/helpers/slicedToArray.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./common/components/index.js */
/*! ModuleConcatenation bailout: Cannot concat with ./common/hooks/index.js */
/*! ModuleConcatenation bailout: Cannot concat with ./common/images/index.js */
/*! ModuleConcatenation bailout: Cannot concat with ./common/settings/index.js */
/*! ModuleConcatenation bailout: Cannot concat with ./common/utils/index.js */
/*! ModuleConcatenation bailout: Cannot concat with ./components/items/_state/context.js */
/*! ModuleConcatenation bailout: Cannot concat with ./components/link/index.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/products/product/_state/context.js */
/*! ModuleConcatenation bailout: Cannot concat with ./components/shop/_state/context.js */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/drift-zoom/es/Drift.js */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/immutability-helper/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/lodash/has.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/lodash/isEmpty.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/lodash/isNull.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/uuid/v4.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with external "react" (<- Module is not an ECMAScript module) */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/slicedToArray.js\nvar slicedToArray = __webpack_require__(\"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\nvar slicedToArray_default = /*#__PURE__*/__webpack_require__.n(slicedToArray);\n\n// EXTERNAL MODULE: external \"react\"\nvar external_react_ = __webpack_require__(\"react\");\nvar external_react_default = /*#__PURE__*/__webpack_require__.n(external_react_);\n\n// EXTERNAL MODULE: ./node_modules/lodash/has.js\nvar has = __webpack_require__(\"./node_modules/lodash/has.js\");\nvar has_default = /*#__PURE__*/__webpack_require__.n(has);\n\n// EXTERNAL MODULE: ./components/products/product/_state/context.js\nvar context = __webpack_require__(\"./components/products/product/_state/context.js\");\n\n// EXTERNAL MODULE: ./components/items/_state/context.js\nvar _state_context = __webpack_require__(\"./components/items/_state/context.js\");\n\n// EXTERNAL MODULE: ./components/shop/_state/context.js\nvar shop_state_context = __webpack_require__(\"./components/shop/_state/context.js\");\n\n// CONCATENATED MODULE: ./components/products/product/images/gallery/_state/context.js\n\nvar ProductGalleryContext = external_react_default.a.createContext();\n\n// EXTERNAL MODULE: ./common/images/index.js\nvar common_images = __webpack_require__(\"./common/images/index.js\");\n\n// EXTERNAL MODULE: ./components/link/index.jsx\nvar components_link = __webpack_require__(\"./components/link/index.jsx\");\n\n// EXTERNAL MODULE: ./common/settings/index.js\nvar settings = __webpack_require__(\"./common/settings/index.js\");\n\n// EXTERNAL MODULE: ./common/components/index.js\nvar components = __webpack_require__(\"./common/components/index.js\");\n\n// CONCATENATED MODULE: ./components/products/product/images/image/index.jsx\n\n\n\n\n\n\n\n\n\n\n\nfunction ProductImage(_ref) {\n  var image = _ref.image,\n      isFeatured = _ref.isFeatured;\n  var imageRef = Object(external_react_[\"useRef\"])();\n\n  var _useContext = Object(external_react_[\"useContext\"])(shop_state_context[\"ShopContext\"]),\n      _useContext2 = slicedToArray_default()(_useContext, 1),\n      shopState = _useContext2[0];\n\n  var _useContext3 = Object(external_react_[\"useContext\"])(_state_context[\"ItemsContext\"]),\n      _useContext4 = slicedToArray_default()(_useContext3, 1),\n      itemsState = _useContext4[0];\n\n  var _useContext5 = Object(external_react_[\"useContext\"])(context[\"ProductContext\"]),\n      _useContext6 = slicedToArray_default()(_useContext5, 1),\n      productState = _useContext6[0];\n\n  var _useContext7 = Object(external_react_[\"useContext\"])(ProductGalleryContext),\n      _useContext8 = slicedToArray_default()(_useContext7, 2),\n      galleryState = _useContext8[0],\n      galleryDispatch = _useContext8[1];\n\n  var _useState = Object(external_react_[\"useState\"])(applyImageSizing()),\n      _useState2 = slicedToArray_default()(_useState, 2),\n      productImageSrc = _useState2[0],\n      setProductImageSrc = _useState2[1];\n\n  function doFeaturedSizing() {\n    return Object(common_images[\"addCustomSizingToImageUrl\"])({\n      src: image.src,\n      width: shopState.settings.productsImagesSizingWidth,\n      height: shopState.settings.productsImagesSizingHeight,\n      crop: shopState.settings.productsImagesSizingCrop,\n      scale: shopState.settings.productsImagesSizingScale\n    });\n  }\n\n  function doThumbnailSizing() {\n    return Object(common_images[\"addCustomSizingToImageUrl\"])({\n      src: image.src,\n      width: shopState.settings.productsThumbnailImagesSizingWidth,\n      height: shopState.settings.productsThumbnailImagesSizingHeight,\n      crop: shopState.settings.productsThumbnailImagesSizingCrop,\n      scale: shopState.settings.productsThumbnailImagesSizingScale\n    });\n  }\n\n  function applyImageSizing() {\n    if (isFeatured) {\n      if (shopState.settings.productsImagesSizingToggle) {\n        return doFeaturedSizing();\n      }\n\n      return image.src;\n    } else {\n      if (shopState.settings.productsThumbnailImagesSizingToggle) {\n        return doThumbnailSizing();\n      }\n\n      return image.src;\n    }\n  }\n\n  function isShowingLink() {\n    return Object(settings[\"hasSinglePage\"])() && !Object(components[\"onSinglePage\"])(itemsState) && !productState.hasManyImages;\n  }\n\n  Object(external_react_[\"useEffect\"])(function () {\n    setProductImageSrc(applyImageSizing());\n\n    if (isFeatured) {\n      galleryDispatch({\n        type: 'SET_FEAT_IMAGE_ELEMENT',\n        payload: imageRef.current\n      });\n    }\n  }, [image]);\n  /*\n  \n  TODO: Fix duplication here. For some reason the Drift image zoom breaks if we move \n  the image tag into a resuable component. Probably something to do with ref forwarding.\n   */\n\n  return isShowingLink() ? productImageSrc && external_react_default.a.createElement(components_link[\"Link\"], {\n    payload: productState.payload,\n    type: \"products\",\n    shop: shopState\n  }, external_react_default.a.createElement(Img, {\n    imageRef: imageRef,\n    image: image,\n    productImageSrc: productImageSrc,\n    shopState: shopState\n  })) : productImageSrc && external_react_default.a.createElement(Img, {\n    imageRef: imageRef,\n    image: image,\n    productImageSrc: productImageSrc,\n    shopState: shopState\n  });\n}\n\nfunction Img(props) {\n  return external_react_default.a.createElement(external_react_default.a.Fragment, null, external_react_default.a.createElement(\"img\", {\n    ref: props.imageRef,\n    itemProp: \"image\",\n    src: props.productImageSrc,\n    className: \"wps-product-image\",\n    alt: props.image.altText,\n    \"data-wps-is-ready\": props.shopState.isShopReady ? '1' : '0',\n    \"data-zoom\": props.image.src\n  }));\n}\n\n\n// CONCATENATED MODULE: ./components/products/product/images/thumbnail/index.jsx\n\n\n\n\n\n\n\nfunction ProductThumbnailImage(_ref) {\n  var image = _ref.image;\n\n  var _useContext = Object(external_react_[\"useContext\"])(shop_state_context[\"ShopContext\"]),\n      _useContext2 = slicedToArray_default()(_useContext, 1),\n      shopState = _useContext2[0];\n\n  var _useContext3 = Object(external_react_[\"useContext\"])(ProductGalleryContext),\n      _useContext4 = slicedToArray_default()(_useContext3, 2),\n      galleryState = _useContext4[0],\n      galleryDispatch = _useContext4[1];\n\n  var _useContext5 = Object(external_react_[\"useContext\"])(context[\"ProductContext\"]),\n      _useContext6 = slicedToArray_default()(_useContext5, 1),\n      productState = _useContext6[0];\n\n  var isFirstRender = Object(external_react_[\"useRef\"])(true);\n\n  var _useState = Object(external_react_[\"useState\"])(false),\n      _useState2 = slicedToArray_default()(_useState, 2),\n      isActive = _useState2[0],\n      setIsActive = _useState2[1];\n\n  function checkIsActive(featImageSrc) {\n    return featImageSrc === image.src;\n  }\n\n  function handleThumbnailClick() {\n    galleryDispatch({\n      type: 'SET_FEAT_IMAGE',\n      payload: image\n    });\n  }\n\n  Object(external_react_[\"useEffect\"])(function () {\n    setIsActive(checkIsActive(galleryState.featImage.src));\n  }, [galleryState.featImage]);\n  Object(external_react_[\"useEffect\"])(function () {\n    if (productState.selectedVariant) {\n      galleryDispatch({\n        type: 'SET_FEAT_IMAGE',\n        payload: productState.selectedVariant.image\n      });\n      setIsActive(checkIsActive(productState.selectedVariant.image.src));\n    }\n  }, [productState.selectedVariant]);\n  return external_react_default.a.createElement(\"div\", {\n    className: \"wps-component wps-component-products-images-thumbnail\",\n    onClick: handleThumbnailClick,\n    \"data-wps-is-active\": isActive,\n    \"data-wps-is-ready\": shopState.isShopReady\n  }, external_react_default.a.createElement(ProductImage, {\n    isFeatured: false,\n    image: image\n  }));\n}\n\n\n// EXTERNAL MODULE: ./node_modules/uuid/v4.js\nvar v4 = __webpack_require__(\"./node_modules/uuid/v4.js\");\nvar v4_default = /*#__PURE__*/__webpack_require__.n(v4);\n\n// EXTERNAL MODULE: ./node_modules/lodash/isEmpty.js\nvar isEmpty = __webpack_require__(\"./node_modules/lodash/isEmpty.js\");\nvar isEmpty_default = /*#__PURE__*/__webpack_require__.n(isEmpty);\n\n// CONCATENATED MODULE: ./components/products/product/images/thumbnails/index.jsx\n\n\n\n\n\n\n\nfunction ProductThumbnailImages() {\n  var _useContext = Object(external_react_[\"useContext\"])(context[\"ProductContext\"]),\n      _useContext2 = slicedToArray_default()(_useContext, 1),\n      productState = _useContext2[0];\n\n  function hasImages() {\n    return productState.payload && !isEmpty_default()(productState.payload.images);\n  }\n\n  return hasImages() && external_react_default.a.createElement(\"div\", {\n    className: \"wps-thumbnails-wrapper\"\n  }, productState.payload.images.map(function (image) {\n    return external_react_default.a.createElement(ProductThumbnailImage, {\n      key: v4_default()(),\n      image: image\n    });\n  }));\n}\n\n\n// EXTERNAL MODULE: ./node_modules/lodash/isNull.js\nvar isNull = __webpack_require__(\"./node_modules/lodash/isNull.js\");\nvar isNull_default = /*#__PURE__*/__webpack_require__.n(isNull);\n\n// EXTERNAL MODULE: ./node_modules/drift-zoom/es/Drift.js + 6 modules\nvar Drift = __webpack_require__(\"./node_modules/drift-zoom/es/Drift.js\");\n\n// CONCATENATED MODULE: ./components/products/product/images/featured/index.jsx\n\n\n\n\n\n\n\n\n\n\nfunction getVariantImage(variant) {\n  return variant.image;\n}\n\nfunction destroyDrift(drift) {\n  drift.destroy();\n  window.Drift = null;\n  drift = null;\n}\n\nfunction ProductFeaturedImage() {\n  var paneElement = Object(external_react_[\"useRef\"])();\n  var isFirstRender = Object(external_react_[\"useRef\"])(true);\n\n  var _useContext = Object(external_react_[\"useContext\"])(shop_state_context[\"ShopContext\"]),\n      _useContext2 = slicedToArray_default()(_useContext, 1),\n      shopState = _useContext2[0];\n\n  var _useContext3 = Object(external_react_[\"useContext\"])(_state_context[\"ItemsContext\"]),\n      _useContext4 = slicedToArray_default()(_useContext3, 1),\n      itemsState = _useContext4[0];\n\n  var _useContext5 = Object(external_react_[\"useContext\"])(context[\"ProductContext\"]),\n      _useContext6 = slicedToArray_default()(_useContext5, 1),\n      productState = _useContext6[0];\n\n  var _useContext7 = Object(external_react_[\"useContext\"])(ProductGalleryContext),\n      _useContext8 = slicedToArray_default()(_useContext7, 1),\n      galleryState = _useContext8[0];\n\n  var _useState = Object(external_react_[\"useState\"])(galleryState.featImage),\n      _useState2 = slicedToArray_default()(_useState, 2),\n      featImage = _useState2[0],\n      setFeatImage = _useState2[1];\n\n  function driftOptions() {\n    return {\n      paneContainer: paneElement.current,\n      inlineOffsetX: -80\n    };\n  }\n\n  function showZoom() {\n    if (isNull_default()(itemsState.componentOptions.showZoom)) {\n      return shopState.settings.productsImagesShowZoom;\n    }\n\n    return itemsState.componentOptions.showZoom;\n  }\n\n  function hasFeatImage() {\n    return featImage && galleryState.featImageElement;\n  }\n\n  Object(external_react_[\"useEffect\"])(function () {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n\n    if (galleryState.featImage) {\n      setFeatImage(galleryState.featImage);\n    }\n  }, [galleryState.featImage]);\n  Object(external_react_[\"useEffect\"])(function () {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n\n    if (hasFeatImage() && showZoom()) {\n      var drift = new Drift[\"default\"](galleryState.featImageElement, driftOptions());\n      return function () {\n        destroyDrift(drift);\n      };\n    }\n  }, [galleryState.featImageElement]);\n  Object(external_react_[\"useEffect\"])(function () {\n    if (productState.selectedVariant) {\n      setFeatImage(getVariantImage(productState.selectedVariant));\n    }\n  }, [productState.selectedVariant]);\n  return external_react_default.a.createElement(\"div\", {\n    className: \"wps-gallery-featured-wrapper\",\n    ref: paneElement\n  }, external_react_default.a.createElement(\"div\", {\n    className: \"wps-product-image-wrapper\"\n  }, featImage ? external_react_default.a.createElement(ProductImage, {\n    isFeatured: true,\n    image: featImage\n  }) : external_react_default.a.createElement(ProductImage, {\n    isFeatured: true,\n    image: galleryState.featImagePlaceholder\n  })));\n}\n\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/extends.js\nvar helpers_extends = __webpack_require__(\"./node_modules/@babel/runtime/helpers/extends.js\");\nvar extends_default = /*#__PURE__*/__webpack_require__.n(helpers_extends);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/objectSpread.js\nvar objectSpread = __webpack_require__(\"./node_modules/@babel/runtime/helpers/objectSpread.js\");\nvar objectSpread_default = /*#__PURE__*/__webpack_require__.n(objectSpread);\n\n// EXTERNAL MODULE: ./node_modules/immutability-helper/index.js\nvar immutability_helper = __webpack_require__(\"./node_modules/immutability-helper/index.js\");\nvar immutability_helper_default = /*#__PURE__*/__webpack_require__.n(immutability_helper);\n\n// CONCATENATED MODULE: ./components/products/product/images/gallery/_state/reducer.js\n\n\n\nfunction ProductGalleryReducer(state, action) {\n  switch (action.type) {\n    case 'SET_FEAT_IMAGE':\n      {\n        return objectSpread_default()({}, state, {\n          featImage: immutability_helper_default()(state.featImage, {\n            $set: action.payload\n          })\n        });\n      }\n\n    case 'SET_FEAT_IMAGE_ELEMENT':\n      {\n        return objectSpread_default()({}, state, {\n          featImageElement: immutability_helper_default()(state.featImageElement, {\n            $set: action.payload\n          })\n        });\n      }\n\n    default:\n      {\n        throw new Error(\"Unhandled action type: \".concat(action.type, \" in ProductGalleryReducer\"));\n      }\n  }\n}\n\n\n// CONCATENATED MODULE: ./components/products/product/images/gallery/_state/initial-state.js\nfunction ProductGalleryInitialState(productState) {\n  return {\n    featImage: productState.payload && productState.payload.images ? productState.payload.images[0] : false,\n    featImageElement: false,\n    featImagePlaceholder: {\n      src: '',\n      alt: 'WP Shopify Placeholder Image'\n    }\n  };\n}\n\n\n// CONCATENATED MODULE: ./components/products/product/images/gallery/_state/provider.jsx\n\n\n\n\n\n\n\nfunction ProductGalleryProvider(props) {\n  var _React$useReducer = external_react_default.a.useReducer(ProductGalleryReducer, ProductGalleryInitialState(props.productState)),\n      _React$useReducer2 = slicedToArray_default()(_React$useReducer, 2),\n      state = _React$useReducer2[0],\n      dispatch = _React$useReducer2[1];\n\n  var value = external_react_default.a.useMemo(function () {\n    return [state, dispatch];\n  }, [state]);\n  return external_react_default.a.createElement(ProductGalleryContext.Provider, extends_default()({\n    value: value\n  }, props));\n}\n\n\n// CONCATENATED MODULE: ./components/products/product/images/gallery/index.jsx\n\n\n\n\n\n\n\n\n\nfunction ProductGallery() {\n  var _useContext = Object(external_react_[\"useContext\"])(_state_context[\"ItemsContext\"]),\n      _useContext2 = slicedToArray_default()(_useContext, 1),\n      itemsState = _useContext2[0];\n\n  var _useContext3 = Object(external_react_[\"useContext\"])(context[\"ProductContext\"]),\n      _useContext4 = slicedToArray_default()(_useContext3, 1),\n      productState = _useContext4[0];\n\n  function hasManyImages() {\n    if (!productState) {\n      return false;\n    }\n\n    return productState.hasManyImages;\n  }\n\n  function isFeaturedOnly() {\n    if (!has_default()(itemsState.componentOptions, 'showFeaturedOnly')) {\n      return false;\n    }\n\n    return itemsState.componentOptions.showFeaturedOnly;\n  }\n\n  return external_react_default.a.createElement(external_react_default.a.Fragment, null, external_react_default.a.createElement(ProductGalleryProvider, {\n    productState: productState\n  }, isFeaturedOnly() ? external_react_default.a.createElement(ProductFeaturedImage, null) : hasManyImages() ? external_react_default.a.createElement(external_react_default.a.Fragment, null, external_react_default.a.createElement(ProductFeaturedImage, null), external_react_default.a.createElement(ProductThumbnailImages, null)) : external_react_default.a.createElement(ProductFeaturedImage, null)));\n}\n\n\n// EXTERNAL MODULE: ./common/hooks/index.js\nvar hooks = __webpack_require__(\"./common/hooks/index.js\");\n\n// EXTERNAL MODULE: ./common/utils/index.js\nvar utils = __webpack_require__(\"./common/utils/index.js\");\n\n// CONCATENATED MODULE: ./components/products/product/images/index.jsx\n\n\n\n\n\n\n\n\nfunction ProductImages() {\n  var _useContext = Object(external_react_[\"useContext\"])(context[\"ProductContext\"]),\n      _useContext2 = slicedToArray_default()(_useContext, 1),\n      productState = _useContext2[0];\n\n  var _useContext3 = Object(external_react_[\"useContext\"])(_state_context[\"ItemsContext\"]),\n      _useContext4 = slicedToArray_default()(_useContext3, 1),\n      itemsState = _useContext4[0];\n\n  return Object(hooks[\"usePortal\"])(external_react_default.a.createElement(external_react_default.a.Fragment, null, external_react_default.a.createElement(\"div\", {\n    className: \"wps-component wps-component-products-images\",\n    \"data-wps-component-order\": \"0\"\n  }, external_react_default.a.createElement(ProductGallery, null))), Object(utils[\"findPortalElement\"])(productState.element, itemsState.componentOptions.dropzoneProductGallery));\n}\n\n/* harmony default export */ var product_images = __webpack_exports__[\"default\"] = (ProductImages);\n\n//# sourceURL=webpack://wpshopify/./components/products/product/images/index.jsx_+_9_modules?");

/***/ })

}]);