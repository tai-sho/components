(window.wpshopifyComponents=window.wpshopifyComponents||[]).push([[4],{329:function(e,t,n){"use strict";n.r(t);var c=n(4),a=n.n(c),u=n(14),r=n.n(u),o=n(1),p=n.n(o),s=n(0),E=n.n(s),l=n(96),T=n(8),y=n(10),i=n(9),d=n.n(i),f=n(7),_=n(13),C=E.a.lazy(function(){return n.e(3).then(n.bind(null,325))}),h=E.a.lazy(function(){return n.e(1).then(n.bind(null,324))}),b=E.a.lazy(function(){return n.e(2).then(n.bind(null,323))}),I=E.a.lazy(function(){return n.e(0).then(n.bind(null,321))});t.default=function(){var e=Object(s.useContext)(l.a),t=p()(e,2),n=t[0],c=t[1],u=Object(s.useContext)(T.a),o=p()(u,1)[0],i=Object(s.useRef)(),O=Object(s.useRef)(!0),S=Object(y.a)("update.checkout.attributes"),A=Object(y.a)("set.checkout.attributes"),j=Object(y.a)("set.checkout.note"),m=Object(y.a)("product.addToCart");function k(){return(k=r()(a.a.mark(function e(){var t,n,u,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.checkoutId){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(_.a)(Object(f.getProductIdsFromLineItems)());case 4:t=e.sent,n=p()(t,2),u=n[0],r=n[1],u&&shopDispatch({type:"UPDATE_NOTICES",payload:{type:"error",message:u}}),c({type:"SET_CHECKOUT_CACHE",payload:{checkoutId:o.checkoutId}}),c({type:"SET_LINE_ITEMS_AND_VARIANTS",payload:{lineItems:{products:r},checkoutId:o.checkoutId}}),d()(r)?c({type:"SET_IS_CART_EMPTY",payload:!0}):c({type:"SET_IS_CART_EMPTY",payload:!1}),c({type:"SET_IS_CART_READY",payload:!0});case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(s.useEffect)(function(){!function(){k.apply(this,arguments)}()},[o.checkoutId]),Object(s.useEffect)(function(){O.current?O.current=!1:c({type:"UPDATE_CHECKOUT_ATTRIBUTES",payload:S})},[S]),Object(s.useEffect)(function(){O.current?O.current=!1:c({type:"SET_CHECKOUT_ATTRIBUTES",payload:A})},[A]),Object(s.useEffect)(function(){O.current?O.current=!1:c({type:"SET_CHECKOUT_NOTE",payload:j})},[j]),Object(s.useEffect)(function(){O.current?O.current=!1:(m&&(c({type:"UPDATE_LINE_ITEMS_AND_VARIANTS",payload:m}),c({type:"TOGGLE_CART",payload:!0})),d()(m)?c({type:"SET_IS_CART_EMPTY",payload:!0}):c({type:"SET_IS_CART_EMPTY",payload:!1}))},[m]),E.a.createElement("section",{ref:i,className:"wps-cart"},E.a.createElement(I,null),E.a.createElement(C,null),E.a.createElement(h,{isCartEmpty:n.isCartEmpty,checkoutCache:n.checkoutCache}),E.a.createElement(b,null))}}}]);