(window.wpshopify=window.wpshopify||[]).push([[2],{323:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(0),o=a.n(r),s=a(8),u=a(96),i=a(4),l=a.n(i),p=a(14),m=a.n(p),b=a(30),E=a(5),y=a(7),f=a(9),C=a.n(f),d=a(13);function h(){var e=Object(r.useContext)(s.a),t=c()(e,1)[0],a=Object(r.useContext)(u.a),n=c()(a,2),i=n[0],p=n[1];function b(){return t.isMobile?(p({type:"SET_IS_CHECKING_OUT",payload:!1}),"_self"):("_blank"===t.settings.checkoutButtonTarget&&p({type:"SET_IS_CHECKING_OUT",payload:!1}),t.settings.checkoutButtonTarget)}function f(e){var a;window.open((a=e.webUrl,t.info.primaryDomain.url+function(e){return e.split("myshopify.com")[1]}(a)),b())}function h(e){if(!t.settings.enableCustomCheckoutDomain||!e.webUrl.includes("myshopify.com"))return function(e){window.open(e.webUrl,b())}(e);f(e)}function O(){return(O=m()(l.a.mark(function e(){var t,a,n,r,o,s,u,m;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p({type:"UPDATE_NOTICES",payload:[]}),p({type:"SET_IS_CHECKING_OUT",payload:!0}),Object(E.f)()&&wp.hooks.doAction("on.checkout",i.checkoutCache),e.next=5,Object(d.a)(Object(y.replaceLineItems)(i.checkoutCache.lineItems));case 5:if(t=e.sent,a=c()(t,2),n=a[0],r=a[1],!n){e.next=12;break}return p({type:"SET_IS_CHECKING_OUT",payload:!1}),e.abrupt("return",p({type:"UPDATE_NOTICES",payload:{type:"error",message:n}}));case 12:if(!C()(r.lineItems)){e.next=15;break}return p({type:"SET_IS_CHECKING_OUT",payload:!1}),e.abrupt("return",p({type:"UPDATE_NOTICES",payload:{type:"error",message:"No line items exist "}}));case 15:if((!WP_Shopify.misc.isPro||C()(i.customAttributes))&&C()(i.note)){e.next=26;break}return e.next=18,Object(d.a)(Object(y.updateCheckoutAttributes)({customAttributes:i.customAttributes,note:i.note}));case 18:if(o=e.sent,s=c()(o,2),u=s[0],m=s[1],!u){e.next=25;break}return p({type:"SET_IS_CHECKING_OUT",payload:!1}),e.abrupt("return",p({type:"UPDATE_NOTICES",payload:{type:"error",message:u}}));case 25:return e.abrupt("return",h(m));case 26:h(r);case 27:case"end":return e.stop()}},e)}))).apply(this,arguments)}return o.a.createElement(o.a.Fragment,null,o.a.createElement(E.a,{name:"cart.checkout.before",args:[i]}),o.a.createElement(w,{cartState:i,onCheckout:function(){return O.apply(this,arguments)},buttonStyle:function(){return{backgroundColor:t.settings.cart.checkoutButtonColor}}}),o.a.createElement(E.a,{name:"cart.checkout.after",args:[i]}))}function w(e){var t=e.cartState,a=e.buttonStyle,n=e.onCheckout;return o.a.createElement("button",{className:"wps-btn wps-btn-checkout",onClick:n,"data-wps-is-ready":t.isReady,disabled:t.isCheckingOut||!t.termsAccepted||t.isCartEmpty,style:a()},t.isCheckingOut?o.a.createElement(b.a,{isLoading:t.isCheckingOut}):t.checkoutText)}var O=a(300);function T(){var e=Object(r.useContext)(u.a),t=c()(e,2),a=(t[0],t[1]),n=Object(r.useContext)(s.a),i=c()(n,2),l=i[0],p=(i[1],Object(r.useState)("")),m=c()(p,2),b=m[0],y=m[1],f=Object(O.a)(b,250),C=c()(f,1)[0],d=Object(r.useRef)(!0);return Object(r.useEffect)(function(){d.current?d.current=!1:(Object(E.f)()&&wp.hooks.doAction("on.checkout.note",C),WP_Shopify.misc.isPro&&a({type:"SET_CHECKOUT_NOTE",payload:C}))},[C]),o.a.createElement("section",{className:"wps-cart-notes"},o.a.createElement("label",{value:"Checkout notes",htmlFor:"wps-input-notes"},"Notes:"),o.a.createElement("textarea",{placeholder:l.settings.cart.cartNotesPlaceholder,id:"wps-input-notes",className:"wps-input wps-input-textarea",onChange:function(e){y(e.target.value)}}))}function _(){var e=Object(r.useContext)(s.a),t=c()(e,1)[0],a=Object(r.useContext)(u.a),n=c()(a,2),i=(n[0],n[1]),l=Object(r.useState)(!1),p=c()(l,2),m=p[0],b=p[1];return Object(r.useEffect)(function(){i({type:"SET_TERMS_ACCEPTED",payload:!1})},[]),o.a.createElement("section",{className:"wps-cart-terms container"},o.a.createElement("div",{className:"wps-input-row row"},o.a.createElement("input",{onChange:function(e){b(!m),WP_Shopify.misc.isPro&&i({type:"SET_TERMS_ACCEPTED",payload:!m})},id:"wps-input-terms",defaultChecked:m,type:"checkbox",className:"wps-input wps-input-checkbox"}),o.a.createElement("label",{dangerouslySetInnerHTML:{__html:t.settings.cart.cartTermsContent},htmlFor:"wps-input-terms",className:"col-11 wps-input-label wps-input-terms"})))}var k=a(73),S=a(29),g=a(37);function j(e){var t=e.isReady,a=e.totalElement,n=e.currencyCode,s=Object(g.e)(g.c),i=Object(r.useContext)(u.a),l=c()(i,1)[0];return Object(r.useEffect)(function(){t&&s(a.current)},[l.total]),o.a.createElement("div",{className:"baseline row align-items-end justify-content-between m-0"},o.a.createElement("p",{className:"wps-total-prefix p-0"},"Subtotal:"),o.a.createElement("p",{className:"wps-total-amount col p-0",ref:a,"data-wps-is-ready":t},t&&Object(S.a)(l.total,n)))}t.default=function(){var e=Object(r.useContext)(s.a),t=c()(e,1)[0],a=Object(r.useContext)(u.a),n=c()(a,1)[0],i=Object(r.useRef)();return o.a.createElement(o.a.Fragment,null,o.a.createElement("section",{className:"wps-cart-footer"},t.settings.cart.enableCartNotes&&o.a.createElement(T,null),t.settings.cart.enableCartTerms&&o.a.createElement(_,null),!C()(n.notices)&&o.a.createElement(k.a,{notices:n.notices,noticeGroup:"cart"}),o.a.createElement(j,{isReady:n.isReady,currencyCode:t.info.currencyCode,totalElement:i}),o.a.createElement(h,null)))}}}]);